import React, { useMemo, useState } from 'react'
import { generateHitSong, makeItAHit, type HookStyle, type SongLength } from './lib/lyrics'

type View =
  | 'dashboard'
  | 'voice-engine'
  | 'auto-tune'
  | 'equalizer'
  | 'effects'
  | 'presets'
  | 'style-engine'
  | 'sing-any-voice'
  | 'voice-designer'
  | 'signature-voice'
  | 'unrecognizable'
  | 'emotion-engine'
  | 'ai-choir'
  | 'voice-instrument'
  | 'voice-swap'
  | 'stem-split'
  | 'karaoke'
  | 'live-karaoke'
  | 'live-performance'
  | 'podcast'
  | 'vocal-coach'
  | 'vocal-games'
  | 'voice-health'
  | 'hit-song-builder'
  | 'beat-maker'
  | 'instrumental-maker'
  | 'ai-music-maker'
  | 'music-video-ai'
  | 'mastering'
  | 'ai-tools'
  | 'pricing'

type NavItem = { id: View; label: string; badge?: string }
type NavSection = { title: string; items: NavItem[] }

const NAV: NavSection[] = [
  { title: 'Main', items: [
    { id: 'dashboard', label: 'ðŸ  Dashboard' },
    { id: 'voice-engine', label: 'ðŸŽ¤ Voice Engine' },
    { id: 'auto-tune', label: 'ðŸŽ¯ Autoâ€‘Tune Pro' },
    { id: 'equalizer', label: 'ðŸŽšï¸ Equalizer' },
    { id: 'effects', label: 'ðŸŽ›ï¸ Effects' },
  ]},
  { title: 'Voice DNA', items: [
    { id: 'presets', label: 'ðŸŽ¨ Presets' },
    { id: 'style-engine', label: 'ðŸ§¬ Style Engine', badge: '58' },
    { id: 'sing-any-voice', label: 'ðŸŽ­ Sing Any Voice' },
    { id: 'voice-designer', label: 'ðŸ§ª Voice Designer' },
    { id: 'signature-voice', label: 'âœ¨ Signature Voice' },
    { id: 'unrecognizable', label: 'ðŸ•¶ï¸ Unrecognizable Mode' },
    { id: 'emotion-engine', label: 'ðŸ’– Emotion Engine' },
    { id: 'ai-choir', label: 'ðŸŽ¶ AI Choir' },
    { id: 'voice-instrument', label: 'ðŸŽ¸ Voice â†’ Instrument' },
    { id: 'voice-swap', label: 'ðŸ”„ Voice Swap' },
    { id: 'stem-split', label: 'ðŸ”ª Stem Splitter' },
  ]},
  { title: 'Perform', items: [
    { id: 'karaoke', label: 'ðŸŽ¤ Karaoke' },
    { id: 'live-karaoke', label: 'ðŸŽµ Live Karaoke' },
    { id: 'live-performance', label: 'ðŸŽ¸ Live Performance' },
    { id: 'podcast', label: 'ðŸŽ™ï¸ Podcast Studio' },
    { id: 'vocal-coach', label: 'ðŸ† AI Vocal Coach' },
    { id: 'vocal-games', label: 'ðŸŽ® Vocal Games' },
    { id: 'voice-health', label: 'â¤ï¸ Voice Health' },
  ]},
  { title: 'Create', items: [
    { id: 'hit-song-builder', label: 'âœï¸ Hit Song Builder' },
    { id: 'beat-maker', label: 'ðŸ¥ Beat Maker' },
    { id: 'instrumental-maker', label: 'ðŸŽ¼ Instrumental Maker' },
    { id: 'ai-music-maker', label: 'ðŸŽµ AI Music Maker' },
    { id: 'music-video-ai', label: 'ðŸŽ¬ Music Video AI' },
    { id: 'mastering', label: 'ðŸ’¿ Mastering Studio' },
  ]},
  { title: 'Tools', items: [
    { id: 'ai-tools', label: 'ðŸ§  AI Tools' },
    { id: 'pricing', label: 'ðŸ’° Pricing' },
  ]},
]

const c = {
  bg: 'linear-gradient(135deg,#05050a,#0a0a14,#0f0a1a)',
  card: 'rgba(255,255,255,.04)',
  border: 'rgba(255,255,255,.12)',
  cyan: '#00d4ff',
  mag: '#ff00ff',
  green: '#00ff88',
  mut: 'rgba(255,255,255,.65)',
}

const shell: React.CSSProperties = { display: 'flex', minHeight: '100vh', background: c.bg, color: '#fff' }
const side: React.CSSProperties = { width: 300, padding: 14, background: 'rgba(0,0,0,.55)', borderRight: `1px solid rgba(0,212,255,.18)`, position: 'sticky', top: 0, height: '100vh', overflow: 'auto' }
const main: React.CSSProperties = { flex: 1, padding: 22, maxWidth: 1240 }
const card: React.CSSProperties = { background: c.card, border: `1px solid ${c.border}`, borderRadius: 16, padding: 14, marginBottom: 12 }
const h1: React.CSSProperties = { margin: 0, fontSize: 26, background: `linear-gradient(90deg,${c.cyan},${c.mag})`, WebkitBackgroundClip: 'text', color: 'transparent' }
const sub: React.CSSProperties = { margin: '6px 0 18px', color: c.mut, fontSize: 12 }

const btn = (on: boolean): React.CSSProperties => ({
  width: '100%', textAlign: 'left', padding: '10px 10px', borderRadius: 12, cursor: 'pointer',
  background: on ? 'linear-gradient(90deg,rgba(0,212,255,.18),rgba(255,0,255,.12))' : 'transparent',
  border: on ? '1px solid rgba(0,212,255,.28)' : '1px solid transparent',
  color: on ? 'rgba(0,212,255,.95)' : 'rgba(255,255,255,.72)',
  marginTop: 6,
  display: 'flex',
  alignItems: 'center',
  justifyContent: 'space-between',
  gap: 10,
})

const pill: React.CSSProperties = {
  display: 'inline-flex',
  alignItems: 'center',
  gap: 8,
  padding: '8px 10px',
  borderRadius: 999,
  background: 'rgba(255,255,255,.06)',
  border: '1px solid rgba(255,255,255,.12)',
  fontSize: 12,
  color: 'rgba(255,255,255,.8)'
}

const chip = (on: boolean): React.CSSProperties => ({
  padding: '7px 10px',
  borderRadius: 999,
  cursor: 'pointer',
  border: `1px solid ${on ? 'rgba(0,212,255,.55)' : 'rgba(255,255,255,.14)'}`,
  background: on ? 'rgba(0,212,255,.10)' : 'rgba(255,255,255,.04)',
  color: on ? '#eaffff' : 'rgba(255,255,255,.80)',
  fontSize: 12,
})

function Progress({ value }: { value: number }) {
  return (
    <div style={{ height: 8, background: 'rgba(255,255,255,.10)', borderRadius: 999, overflow: 'hidden' }}>
      <div style={{ height: '100%', width: `${value}%`, background: `linear-gradient(90deg,${c.cyan},${c.mag})`, transition: 'width .15s' }} />
    </div>
  )
}

function KnobGrid({ title, items }: { title: string; items: string[] }) {
  return (
    <div style={card}>
      <div style={{ fontSize: 12, color: 'rgba(0,212,255,.95)', marginBottom: 10 }}>{title}</div>
      <div style={{ display: 'grid', gridTemplateColumns: 'repeat(4,minmax(0,1fr))', gap: 10 }}>
        {items.map((k) => (
          <div key={k} style={{ background: 'rgba(0,0,0,.25)', border: '1px solid rgba(255,255,255,.10)', borderRadius: 12, padding: 10 }}>
            <div style={{ fontSize: 11, opacity: .85, marginBottom: 6 }}>{k}</div>
            <input type="range" min={0} max={100} defaultValue={50} style={{ width: '100%' }} />
          </div>
        ))}
      </div>
    </div>
  )
}

function SectionTitle({ title, subtitle }: { title: string; subtitle: string }) {
  return (
    <>
      <h1 style={h1}>{title}</h1>
      <p style={sub}>{subtitle}</p>
    </>
  )
}

export default function App() {
  const [view, setView] = useState<View>('dashboard')

  // Live metrics (simulated)
  const [latency, setLatency] = useState(5.4)
  const [sr, setSr] = useState(96)
  const [cpu, setCpu] = useState(4)

  // Dashboard "Now Playing"
  const [autoTuneMode, setAutoTuneMode] = useState<'Off'|'Natural'|'Hard'|'Creative'>('Natural')
  const [limiterOn, setLimiterOn] = useState(true)
  const [activePreset, setActivePreset] = useState('Studio Polish')

  // Hit Song Builder state
  const [genre, setGenre] = useState('R&B')
  const [mood, setMood] = useState('Romantic')
  const [length, setLength] = useState<SongLength>('extended')
  const [hookStyle, setHookStyle] = useState<HookStyle>('melodic')
  const [topic, setTopic] = useState('')
  const [lyrics, setLyrics] = useState('Generate a full, long-form, professional songâ€¦')
  const [progress, setProgress] = useState(0)

  // Pricing
  const [ownerCode, setOwnerCode] = useState('')
  const [ownerUnlocked, setOwnerUnlocked] = useState(false)

  const genres = useMemo(() => ['R&B','Pop','Hip-Hop','Soul','Gospel','Afrobeat','EDM','Country','Rock','Jazz'], [])
  const moods  = useMemo(() => ['Romantic','Heartbreak','Confident','Vulnerable','Triumphant','Nostalgic','Dark','Uplifting'], [])
  const lengths: {id: SongLength; label: string}[] = [{id:'short',label:'Short'},{id:'standard',label:'Standard'},{id:'extended',label:'Extended'}]
  const hookStyles: {id: HookStyle; label: string}[] = [{id:'anthem',label:'Anthem'},{id:'melodic',label:'Melodic'},{id:'rhythmic',label:'Rhythmic'},{id:'emotional',label:'Emotional'}]

  function resetAll() {
    setLatency(5.4); setSr(96); setCpu(4);
    setAutoTuneMode('Natural'); setLimiterOn(true); setActivePreset('Studio Polish');
    setGenre('R&B'); setMood('Romantic'); setLength('extended'); setHookStyle('melodic'); setTopic('');
    setLyrics('Generate a full, long-form, professional songâ€¦'); setProgress(0);
    setOwnerCode(''); setOwnerUnlocked(false);
  }

  function fakeProgress(ms = 900) {
    setProgress(0)
    const started = Date.now()
    const t = setInterval(() => {
      const p = Math.min(100, Math.round(((Date.now() - started) / ms) * 100))
      setProgress(p)
      if (p >= 100) clearInterval(t)
    }, 60)
  }

  // simulate metrics
  React.useEffect(() => {
    const t = setInterval(() => {
      setLatency((v) => Math.max(1.2, Math.min(8.5, +(v + (Math.random() - 0.5) * 0.4).toFixed(1))))
      setCpu(() => Math.max(2, Math.min(18, Math.round(3 + Math.random() * 8))))
    }, 1500)
    return () => clearInterval(t)
  }, [])

  const header = (
    <div style={{ display:'flex', alignItems:'center', justifyContent:'space-between', gap: 10, marginBottom: 12 }}>
      <div>
        <div style={{ fontWeight: 900, fontSize: 13, letterSpacing: 1, opacity: .9 }}>ðŸŽ¤ Studio In Your Pocket</div>
        <div style={{ fontSize: 12, color: c.mut }}>AI Vocal + Music Creation Platform â€¢ Live + Studio Suite</div>
      </div>
      <div style={{ display:'flex', gap: 10, flexWrap:'wrap', alignItems:'center', justifyContent:'flex-end' }}>
        <div style={pill}>Latency <b style={{ color: 'rgba(0,212,255,.95)' }}>{latency.toFixed(1)}ms</b></div>
        <div style={pill}><b style={{ color: 'rgba(0,212,255,.95)' }}>{sr}kHz</b></div>
        <div style={pill}>CPU <b style={{ color: 'rgba(0,212,255,.95)' }}>{cpu}%</b></div>
        <button onClick={resetAll} style={{ ...pill, cursor:'pointer', background:'rgba(255,255,255,.08)' }}>Reset</button>
      </div>
    </div>
  )

  const dashboard = (
    <>
      {header}
      <SectionTitle title="Dashboard" subtitle="Launch any module. Everything is wired and interactive." />

      <div style={card}>
        <div style={{ fontSize: 12, color: 'rgba(0,212,255,.95)', marginBottom: 10 }}>System</div>
        <div style={{ display:'grid', gridTemplateColumns:'repeat(3,minmax(0,1fr))', gap: 10 }}>
          <div style={{ background:'rgba(0,0,0,.25)', border:'1px solid rgba(255,255,255,.08)', borderRadius:14, padding:12, textAlign:'center' }}>
            <div style={{ fontSize:18, fontWeight:900, color:'rgba(0,212,255,.95)' }}>{latency.toFixed(1)}ms</div>
            <div style={{ fontSize:10, opacity:.6, letterSpacing:1.2, textTransform:'uppercase' }}>Latency</div>
          </div>
          <div style={{ background:'rgba(0,0,0,.25)', border:'1px solid rgba(255,255,255,.08)', borderRadius:14, padding:12, textAlign:'center' }}>
            <div style={{ fontSize:18, fontWeight:900, color:'rgba(0,212,255,.95)' }}>{sr}k</div>
            <div style={{ fontSize:10, opacity:.6, letterSpacing:1.2, textTransform:'uppercase' }}>Rate</div>
          </div>
          <div style={{ background:'rgba(0,0,0,.25)', border:'1px solid rgba(255,255,255,.08)', borderRadius:14, padding:12, textAlign:'center' }}>
            <div style={{ fontSize:18, fontWeight:900, color:'rgba(0,212,255,.95)' }}>{cpu}%</div>
            <div style={{ fontSize:10, opacity:.6, letterSpacing:1.2, textTransform:'uppercase' }}>CPU</div>
          </div>
        </div>
      </div>

      <div style={card}>
        <div style={{ fontSize: 12, color: 'rgba(0,212,255,.95)', marginBottom: 10 }}>Quick Start</div>
        <div style={{ display:'grid', gridTemplateColumns:'repeat(6,minmax(0,1fr))', gap: 10 }}>
          {[
            ['voice-engine','ðŸŽ¤ Voice Engine'],
            ['hit-song-builder','âœï¸ Hit Song Builder'],
            ['music-video-ai','ðŸŽ¬ Music Video AI'],
            ['podcast','ðŸŽ™ï¸ Podcast Studio'],
            ['live-karaoke','ðŸŽµ Live Karaoke'],
            ['ai-tools','ðŸ§  AI Tools'],
          ].map(([id,label]) => (
            <button key={id} onClick={() => setView(id as View)} style={{ cursor:'pointer', padding:12, borderRadius:14, border:'1px solid rgba(255,255,255,.10)', background:'rgba(0,0,0,.25)', color:'#fff', textAlign:'left' }}>
              <div style={{ fontWeight: 900, fontSize: 12 }}>{label}</div>
              <div style={{ opacity:.65, fontSize: 11, marginTop:6 }}>Open</div>
            </button>
          ))}
        </div>
      </div>

      <div style={card}>
        <div style={{ display:'flex', justifyContent:'space-between', alignItems:'center', gap:10, flexWrap:'wrap' }}>
          <div>
            <div style={{ fontSize: 12, color: 'rgba(0,212,255,.95)', marginBottom: 6 }}>Now Playing</div>
            <div style={{ opacity:.7, fontSize: 12 }}>Demo chain status.</div>
          </div>
          <div style={{ display:'flex', gap:10, flexWrap:'wrap' }}>
            <div style={pill}>Autoâ€‘Tune <b style={{ color:'rgba(0,212,255,.95)' }}>{autoTuneMode}</b></div>
            <div style={pill}>Limiter <b style={{ color: limiterOn ? 'rgba(0,255,136,.95)' : 'rgba(255,80,80,.95)' }}>{limiterOn ? 'ON' : 'OFF'}</b></div>
            <div style={pill}>Preset <b style={{ color:'rgba(0,212,255,.95)' }}>{activePreset}</b></div>
          </div>
        </div>
      </div>

      <div style={card}>
        <div style={{ fontSize: 12, color: 'rgba(0,212,255,.95)', marginBottom: 10 }}>Ethical safety</div>
        <div style={{ opacity:.7, fontSize: 12 }}>
          This UI uses style archetypes and transformationsâ€”no realâ€‘person voice cloning.
        </div>
        <div style={{ opacity:.7, fontSize: 12, marginTop: 10 }}>
          Owner / Ethical Note: This is a UI demo for workflow design. For safety, this product concept should not clone or imitate any real person. Use style archetypes and unique output.
        </div>
      </div>
    </>
  )

  const viewPage = () => {
    switch(view){
      case 'dashboard': return dashboard
      case 'voice-engine': return (<>{header}<SectionTitle title="Voice Engine" subtitle="Core vocal changer + enhancer." /><KnobGrid title="Pitch & Tone" items={['Pitch','Formant','Fine','Pitch Correction','Humanize','Vibrato','Drift','Gender','Character','Mix']} /><KnobGrid title="Clarity & Presence" items={['Clarity Mode','Warmth','Presence','Air','Deâ€‘Esser','Noise Gate','Compressor','Limiter']} /></>)
      case 'auto-tune': return (<>{header}<SectionTitle title="Autoâ€‘Tune Pro" subtitle="Natural â†’ Hard â†’ Creative." /><KnobGrid title="Autoâ€‘Tune" items={['Mode','Speed','Key','Scale','Humanize','Vibrato Retain','Formant Lock','Mix']} /></>)
      case 'equalizer': return (<>{header}<SectionTitle title="Equalizer" subtitle="7â€‘band tone sculptor." /><KnobGrid title="EQ Bands" items={['80Hz','250Hz','500Hz','1kHz','2.5kHz','5kHz','12kHz']} /></>)
      case 'effects': return (<>{header}<SectionTitle title="Effects" subtitle="Compressor â€¢ Reverb â€¢ Delay." /><KnobGrid title="Compressor" items={['Threshold','Ratio','Attack','Release','Knee','Makeup']} /><KnobGrid title="Reverb" items={['Size','Decay','Preâ€‘Delay','Damping','Mix']} /><KnobGrid title="Delay" items={['Time','Feedback','Mix','Sync']} /></>)
      case 'presets': return (<>{header}<SectionTitle title="Presets" subtitle="Oneâ€‘tap vocal chains." /><KnobGrid title="Preset Controls" items={['Input','Output','Clarity','Warmth','Presence','Autoâ€‘Tune','Reverb','Delay','Compression','Limiter']} /></>)
      case 'style-engine': return (<>{header}<SectionTitle title="Style Engine" subtitle="58 style archetypes (inspiration only)." /><KnobGrid title="Style Controls" items={['Power','Depth','Brightness','Air','Grit','Smooth','Vibrato','Runs','Emotion','Mix']} /></>)
      case 'sing-any-voice': return (<>{header}<SectionTitle title="Sing Any Voice" subtitle="Archetype-based voice identity shifting (no identity replication)." /><KnobGrid title="Voice Identity" items={['Tone Reshape','Range Sim','Texture Map','Emotion Enhance','Smart Vibrato','Breathiness','Soul Saturation','Runs/Riffs','Gender Tone','Age Tone']} /></>)
      case 'voice-designer': return (<>{header}<SectionTitle title="Voice Designer" subtitle="Build your own sound." /><KnobGrid title="Designer Sliders" items={['Warmth','Grit','Smoothness','Airiness','Power','Depth','Brightness','Vibrato','Runs','Emotional Intensity']} /></>)
      case 'signature-voice': return (<>{header}<SectionTitle title="Signature Voice" subtitle="Save Stage / Studio / Podcast / Alter Ego." /><KnobGrid title="Signature DNA" items={['Warmth','Grit','Smooth','Air','Power','Depth','Brightness','Vibrato','Run Rate','Polish']} /></>)
      case 'unrecognizable': return (<>{header}<SectionTitle title="Unrecognizable Mode" subtitle="Dramatically alter tone signature + resonance + vocal color." /><KnobGrid title="Unrecognizable Controls" items={['Tone Shift','Resonance','Color','Texture','Polish','Identity','Formant','Width','Harmonics','Mix']} /></>)
      case 'emotion-engine': return (<>{header}<SectionTitle title="Emotion Engine" subtitle="Select an emotion and the engine adapts tone/delivery." /><KnobGrid title="Emotion" items={['Heartbreak','Love','Pain','Confidence','Anger','Joy','Nostalgia','Empowerment']} /></>)
      case 'ai-choir': return (<>{header}<SectionTitle title="AI Choir" subtitle="Generate choirs and stacks." /><KnobGrid title="Choir Mixer" items={['Choir Size','Soprano','Alto','Tenor','Baritone','Bass','Spread','Room','Blend','Humanize']} /></>)
      case 'voice-instrument': return (<>{header}<SectionTitle title="Voice â†’ Instrument" subtitle="Convert your voice into instrument timbre." /><KnobGrid title="Instrument Converter" items={['Instrument','Blend','Tone','Expression','Resonance','Attack','Release','Pitch Track','Sustain','Mix']} /></>)
      case 'voice-swap': return (<>{header}<SectionTitle title="Voice Swap" subtitle="Swap voice A â†” voice B." /><KnobGrid title="Swap" items={['Intensity','Tone Blend','Pitch Blend','Timing Preserve','Emotion Preserve','Smoothing','Formant Lock','Mix']} /></>)
      case 'stem-split': return (<>{header}<SectionTitle title="Stem Splitter" subtitle="Split vocals/drums/bass/melody." /><KnobGrid title="Stem Split" items={['Quality','Vocals','Drums','Bass','Melody','Harmony','FX','Export']} /></>)
      case 'karaoke': return (<>{header}<SectionTitle title="Karaoke" subtitle="Sing + scoring." /><KnobGrid title="Karaoke Controls" items={['Key','Reverb','Echo','Autoâ€‘Tune','Guide Volume','Mic Gain','Music Gain','Limiter']} /></>)
      case 'live-karaoke': return (<>{header}<SectionTitle title="Live Karaoke" subtitle="Stage presets + monitor controls." /><KnobGrid title="Live Karaoke" items={['Vocal','Music','Key','Reverb','Echo','Boost','Monitor','Limiter']} /></>)
      case 'live-performance': return (<>{header}<SectionTitle title="Live Performance" subtitle="Stage-safe limiter + setlist workflow." /><KnobGrid title="Stage Controls" items={['Stage Reverb','Crowd','Projection','Monitor','Feedback Guard','Limiter','Setlist Gain','Master']} /></>)
      case 'podcast': return (<>{header}<SectionTitle title="Podcast Studio" subtitle="Broadcast chain + recording workflow." /><KnobGrid title="Podcast" items={['Clarity','Deâ€‘Esser','Warmth','Compression','Gate','Limiter','Loudness','Room Removal']} /></>)
      case 'vocal-coach': return (<>{header}<SectionTitle title="AI Vocal Coach" subtitle="Train pitch, breath, range, runs." /><KnobGrid title="Coach" items={['Pitch Accuracy','Timing','Breath','Vibrato','Agility','Range','Harmony','Confidence']} /></>)
      case 'vocal-games': return (<>{header}<SectionTitle title="Vocal Games" subtitle="Pitch/timing/rhythm games." /><KnobGrid title="Games" items={['Pitch Hero','Note Dash','Rhythm','Harmony','Olympics','Puzzle','XP','Streak']} /></>)
      case 'voice-health': return (<>{header}<SectionTitle title="Voice Health" subtitle="Monitor strain and recommend breaks." /><KnobGrid title="Health" items={['Strain','Fatigue','Hydration','Session Time','Rest Timer','Warmâ€‘Up','Cooldown','Intensity']} /></>)
      case 'ai-tools': return (<>{header}<SectionTitle title="AI Tools" subtitle="Isolation, cleanup, stem tools." /><KnobGrid title="AI Tools" items={['Vocal Isolate','Remove Inst','Remove BG','Remove Reverb','Remove Echo','Stem Sep','Clean Stage','Super Enhance']} /></>)
      case 'beat-maker': return (<>{header}<SectionTitle title="Beat Maker" subtitle="Generate beats with instrument selection." /><KnobGrid title="Beat Maker" items={['Tempo','Swing','Complexity','Kick','Snare','Hat','Bass','Melody','FX','Mix']} /></>)
      case 'instrumental-maker': return (<>{header}<SectionTitle title="Instrumental Maker" subtitle="Generate full instrumentals." /><KnobGrid title="Instrumental" items={['Chord Density','Melody Motion','Bass Weight','Drum Energy','Texture','Arrangement','Key Match','Tempo Lock','Drop','Mix']} /></>)
      case 'ai-music-maker': return (<>{header}<SectionTitle title="AI Music Maker" subtitle="Prompt â†’ full song generation workflow." /><KnobGrid title="Music Maker" items={['Prompt Strength','Genre','Mood','Tempo','Key','Duration','Variation','Export']} /></>)
      case 'music-video-ai': return (<>{header}<SectionTitle title="Music Video AI" subtitle="Generate video plan + export formats." /><KnobGrid title="Video" items={['Scene Energy','Cut Speed','Color Grade','VFX Amount','Lyric Overlay','Lip Sync','Resolution','Export']} /></>)
      case 'mastering': return (<>{header}<SectionTitle title="Mastering Studio" subtitle="1â€‘tap radio/streaming mastering." /><KnobGrid title="Mastering" items={['Loudness','Bass','Clarity','Width','Limiter','Air','Glue','Punch','Ceiling','Output']} /></>)
      case 'pricing': return (
        <>
          {header}
          <SectionTitle title="Pricing" subtitle="Starter $9.99 â€¢ Pro $24.99 â€¢ Lifetime $299" />
          <div style={card}>
            <div style={{ fontSize: 12, color: 'rgba(0,212,255,.95)', marginBottom: 10 }}>Owner Unlock</div>
            <div style={{ display:'flex', gap:10, flexWrap:'wrap' }}>
              <input value={ownerCode} onChange={(e)=>setOwnerCode(e.target.value)} placeholder="Owner codeâ€¦"
                style={{ flex:1, minWidth:260, padding:10, borderRadius:12, border:'1px solid rgba(255,255,255,.14)', background:'rgba(0,0,0,.22)', color:'#fff' }} />
              <button
                type="button"
                onClick={() => {
                  const ok = ownerCode.trim() === 'VOXLEGEND-OWNER-2024'
                  setOwnerUnlocked(ok)
                  alert(ok ? 'Owner access activated.' : 'Invalid code.')
                }}
                style={{ padding:'11px 14px', borderRadius:12, border:0, cursor:'pointer', background:`linear-gradient(90deg,${c.cyan},${c.mag})`, color:'#fff', fontWeight:900 }}
              >
                Unlock
              </button>
            </div>
            <div style={{ marginTop: 10, padding:12, borderRadius:14, background: ownerUnlocked ? 'linear-gradient(90deg,rgba(0,255,136,.18),rgba(0,212,255,.10))':'rgba(0,0,0,.25)', border:'1px solid rgba(255,255,255,.10)' }}>
              <div style={{ fontWeight:900, color: ownerUnlocked ? 'rgba(0,255,136,.95)':'rgba(255,255,255,.75)' }}>
                {ownerUnlocked ? 'LIFETIME ACTIVE â€¢ $0' : 'LOCKED'}
              </div>
            </div>
          </div>
        </>
      )

      case 'hit-song-builder': {
        return (
          <>
            {header}
            <SectionTitle title="AI Hit Song Builder" subtitle="Longer, more professional full songs. Choose Extended for maximum length." />
            <div style={card}>
              <div style={{ display:'grid', gridTemplateColumns:'repeat(3,minmax(0,1fr))', gap:10 }}>
                <div>
                  <div style={{ fontSize: 11, opacity: .7, marginBottom: 6 }}>Genre</div>
                  <div style={{ display:'flex', flexWrap:'wrap', gap:6 }}>
                    {genres.map(g => <div key={g} style={chip(genre===g)} onClick={()=>setGenre(g)}>{g}</div>)}
                  </div>
                </div>
                <div>
                  <div style={{ fontSize: 11, opacity: .7, marginBottom: 6 }}>Mood</div>
                  <div style={{ display:'flex', flexWrap:'wrap', gap:6 }}>
                    {moods.map(m => <div key={m} style={chip(mood===m)} onClick={()=>setMood(m)}>{m}</div>)}
                  </div>
                </div>
                <div>
                  <div style={{ fontSize: 11, opacity: .7, marginBottom: 6 }}>Length</div>
                  <div style={{ display:'flex', flexWrap:'wrap', gap:6 }}>
                    {lengths.map(l => <div key={l.id} style={chip(length===l.id)} onClick={()=>setLength(l.id)}>{l.label}</div>)}
                  </div>
                  <div style={{ height: 10 }} />
                  <div style={{ fontSize: 11, opacity: .7, marginBottom: 6 }}>Hook Focus</div>
                  <div style={{ display:'flex', flexWrap:'wrap', gap:6 }}>
                    {hookStyles.map(h => <div key={h.id} style={chip(hookStyle===h.id)} onClick={()=>setHookStyle(h.id)}>{h.label}</div>)}
                  </div>
                </div>
              </div>

              <div style={{ height: 10 }} />
              <div style={{ fontSize: 11, opacity: .7, marginBottom: 6 }}>Story / Topic</div>
              <textarea
                value={topic}
                onChange={(e)=>setTopic(e.target.value)}
                style={{ width:'100%', minHeight:110, padding:10, borderRadius:12, border:'1px solid rgba(255,255,255,.14)', background:'rgba(0,0,0,.22)', color:'#fff' }}
              />

              <div style={{ height: 10 }} />
              <div style={{ display:'flex', gap:10, flexWrap:'wrap' }}>
                <button
                  type="button"
                  onClick={() => {
                    fakeProgress(900)
                    setLyrics('Generating full songâ€¦')
                    setTimeout(() => {
                      setLyrics(generateHitSong({ genre, mood, topic, length, hookStyle }))
                    }, 950)
                  }}
                  style={{ padding:'11px 14px', borderRadius:12, border:0, cursor:'pointer', background:`linear-gradient(90deg,${c.cyan},${c.mag})`, color:'#fff', fontWeight:900 }}
                >
                  âœ¨ Generate Full Song
                </button>

                <button
                  type="button"
                  onClick={() => setLyrics(makeItAHit(lyrics))}
                  style={{ padding:'11px 14px', borderRadius:12, border:'1px solid rgba(255,255,255,.14)', cursor:'pointer', background:'rgba(255,255,255,.08)', color:'#fff', fontWeight:800 }}
                >
                  ðŸ”¥ Make This A Hit
                </button>

                <button
                  type="button"
                  onClick={async()=>{ try{ await navigator.clipboard.writeText(lyrics); alert('Copied.') } catch { alert('Copy failed.') } }}
                  style={{ padding:'11px 14px', borderRadius:12, border:'1px solid rgba(255,255,255,.14)', cursor:'pointer', background:'rgba(255,255,255,.08)', color:'#fff', fontWeight:800 }}
                >
                  ðŸ“‹ Copy
                </button>
              </div>

              <div style={{ marginTop: 12 }}><Progress value={progress} /></div>
            </div>

            <div style={card}>
              <div style={{ fontSize: 12, color: 'rgba(0,212,255,.95)', marginBottom: 10 }}>Lyrics</div>
              <div style={{ whiteSpace:'pre-wrap', lineHeight:1.55, fontFamily:'ui-monospace, Menlo, Consolas, monospace', fontSize:12, background:'rgba(0,0,0,.28)', border:'1px solid rgba(255,255,255,.10)', borderRadius:14, padding:14, minHeight:320 }}>
                {lyrics}
              </div>
            </div>
          </>
        )
      }

      default:
        return (
          <>
            {header}
            <SectionTitle title="Module" subtitle="This module is present in navigation. If you see this, tell me the module name shown above." />
          </>
        )
    }
  }

  return (
    <div style={shell}>
      <aside style={side}>
        <div style={{ fontWeight: 900, fontSize: 14, letterSpacing: .6, background: `linear-gradient(90deg,${c.cyan},${c.mag},${c.cyan})`, WebkitBackgroundClip: 'text', color: 'transparent' }}>
          ðŸŽ¤ STUDIO IN YOUR POCKET
        </div>
        <div style={{ fontSize: 10, opacity: .6, letterSpacing: 1.4, marginTop: 6 }}>Navigation</div>
        <div style={{ fontSize: 12, opacity: .75, marginTop: 6 }}>Every module opens (like the preview app).</div>

        {NAV.map(sec => (
          <div key={sec.title} style={{ marginTop: 14 }}>
            <div style={{ fontSize: 10, color: 'rgba(0,212,255,.85)', letterSpacing: 1.2, textTransform: 'uppercase' }}>{sec.title}</div>
            {sec.items.map(it => (
              <button key={it.id} type="button" style={btn(view === it.id)} onClick={() => setView(it.id)}>
                <span>{it.label}</span>
                {it.badge ? (
                  <span style={{ fontSize: 11, padding: '2px 8px', borderRadius: 999, background: 'rgba(255,255,255,.10)', border: '1px solid rgba(255,255,255,.12)' }}>
                    {it.badge}
                  </span>
                ) : null}
              </button>
            ))}
          </div>
        ))}
      </aside>

      <main style={main}>{viewPage()}</main>
    </div>
  )
}
